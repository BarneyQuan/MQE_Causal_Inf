install.packages(
robustbase
)
install.packages("robustbase")
knitr::opts_chunk$set(echo = TRUE)
#install.packages("haven",repos = "http://cran.us.r-project.org")
#install.packages("dplyr",repos = "http://cran.us.r-project.org")
library(haven)
library(dplyr)
library(stargazer)
library(lfe)
library(ggplot2)
temp1<-read_dta("../data/cc.dta")
temp1<-as.data.frame(temp1)
temp1<-temp1 %>%
rename(
parcel=var1,
date=var3,
usecode=var10,
sales=var16,
acres=var17,
sqft=var19,
constryr=var20,
class=var23
)
temp1<-temp1[, c("parcel","date","usecode","sales","acres","sqft","constryr","class" )]
temp1<-temp1[!is.na(temp1$date),]
temp1<-temp1[temp1$usecode==20,]
temp1<-temp1[temp1$date<=20001300,]
temp1$cc<-1
temp1$lc<-0
temp2<-read_dta("../data/cc2.dta")
temp2<-as.data.frame(temp2)
temp2<-temp2 %>%
rename(
parcel=parcel__ ,
date=sale_date,
usecode=land_use,
sales=sales_price,
acres=acreage,
sqft=sq_ft,
constryr=yr_blt,
class=class
)
temp2<-temp2[, c("parcel","date","usecode","sales","acres","sqft","constryr","class" )]
temp2$cc<-1
temp2$lc<-0
temp2$month=trunc(temp2$date/10000)
temp2$day=trunc(temp2$date/100)-temp2$month*100
temp2$year=2000+temp2$date-temp2$month*10000-temp2$day*100
temp2$date=temp2$year*10000+temp2$month*100+temp2$day
temp2<-temp2[!is.na(temp2$date),]
temp2<-temp2[temp2$date>=20001300,]
temp2<-temp2[, c("parcel","date","usecode","sales","acres","sqft","constryr","class", "cc","lc" )]
temp<-rbind(temp1,temp2)
rm(temp1, temp2)
temp3<-read_dta("../data/lc.dta")
temp3<-as.data.frame(temp3)
temp3<-temp3 %>%
rename(
parcel=var1,
date=var2,
usecode=var3,
sales=var4,
acres=var5,
sqft=var6,
constryr=var7,
class=var11
)
temp3<-temp3[, c("parcel","date","usecode","sales","acres","sqft","constryr","class" )]
temp3$cc<-0
temp3$lc<-1
temp3<-temp3[!is.na(temp3$date),]
temp3<-temp3[temp3$usecode==20,]
temp3<-temp3[temp3$date<=20001300,]
temp<-rbind(temp,temp3)
rm(temp3)
temp4<-read_dta("../data/lc2.dta")
temp4<-as.data.frame(temp4)
temp4<-temp4 %>%
rename(
parcel=var1,
date=var2,
sales=var3,
acres=var4,
sqft=var5,
constryr=var6,
class=var8
)
temp4$cc<-0
temp4$lc<-1
temp4$usecode<-20
temp4<-temp4[!is.na(temp4$date),]
temp4<-temp4[temp4$date>=20001300,]
temp4<-temp4[, c("parcel","date","usecode","sales","acres","sqft","constryr","class","cc","lc" )]
temp<-rbind(temp,temp4)
rm(temp4)
temp$year=trunc(temp$date/10000)
temp$month=trunc(temp$date/100)-temp$year*100
temp$day=temp$date-temp$month*100-temp$year*10000
temp$month[temp$month==0]<-1
temp$age<-temp$year-temp$constryr
temp$age2<-temp$age*temp$age
temp$acres2<-temp$acres*temp$acres
temp$lognomsales<-log(temp$sales)
temp$quarter<-0
temp$quarter[temp$month%in%c(1,2,3)]<-1
temp$quarter[temp$month%in%c(4,5,6)]<-2
temp$quarter[temp$month%in%c(7,8,9)]<-3
temp$quarter[temp$month%in%c(10,11,12)]<-3
temp<-temp[temp$sales!=0,]
temp<-temp[temp$age<150,]
temp<-temp[temp$sqft!=0,]
temp<-temp[temp$sqft<10000,]
temp<-temp[!(temp$month==10 & temp$year==2002),]
temp<-temp[temp$month!=0,]
temp$age[temp$age==-1]<-0
temp$day[temp$day==32]<-31
temp<-temp%>% distinct(parcel,date, .keep_all = TRUE)
temp<-temp%>% distinct(sales,date,cc,acres, .keep_all = TRUE)
temp$class[temp$class>0 & temp$class<0.5]<-0.5
temp$class[temp$class>0.5 & temp$class<1]<-1
temp$class[temp$class>1 & temp$class<1.5]<-1.5
temp$class[temp$class>1.5 & temp$class<2]<-2
temp$class[temp$class>2 & temp$class<2.5]<-2.5
temp$class[temp$class>2.5 & temp$class<3]<-3
temp$class[temp$class>3 & temp$class<3.5]<-3.5
temp$class[temp$class>3.5 & temp$class<4]<-4
temp$class[temp$class>5]<-0
temp$parcel<-(2*temp$cc*100000000)+(3*temp$lc*100000000)+temp$parcel
temp$group<-temp$cc*1000000+temp$year*100+temp$month
index<-read_dta("../data/price.dta")
temp <- left_join(temp, index, by = c("year", "quarter"))
temp$realsales<-temp$sales*100/temp$nvhpi
temp$logrealsales<-log(temp$realsales)
temp$post<-0
temp$post[temp$year>1999]<-1
library(lfe)
library(ggplot2)
library(dplyr)
library(ggplot2)
library(stargazer)
library(robustbase)
library(wooldridge)
# Set so that long lines in R will be wrapped:
knitr::opts_chunk$set(tidy.opts=list(width.cutoff=80), tidy=TRUE)
bwght<-bwght
View(bwght)
reg1<-lm(bwght~log(lfaminc)+motheduc+parity, bwght)
View(reg1)
View(reg1)
View(bwght)
library(lfe)
library(ggplot2)
library(dplyr)
library(ggplot2)
library(stargazer)
library(robustbase)
library(wooldridge)
# Set so that long lines in R will be wrapped:
knitr::opts_chunk$set(tidy.opts=list(width.cutoff=80), tidy=TRUE)
knitr::kable(head(diamonds))
reg1<-felm(price~carat+depth, diamonds)
summary(reg1)
myPlot <- ggplot(data = diamonds, aes(y = price, x = carat)) +
geom_point(color = "gray50", shape = 21)
myPlot
reg1<-felm(price~carat+depth, diamonds)
summary(reg1, robust=TRUE)
stargazer(reg1, type = "latex" , se =  list(reg1$rse), header=FALSE)
nox <- as.data.frame(NOxEmissions) %>%
mutate(ones = 1)
noClusters <- felm(data = nox, LNOx ~ sqrtWS )
Clusters <- felm(data = nox, LNOx ~ sqrtWS |0|0| julday)
stargazer(noClusters,Clusters, type = "latex" , header=FALSE)
#using the bwght data from the wooldridge package
reg1<-lm(bwght~lfaminc+motheduc+parity, bwght)
summary(reg1)
bwght<-bwght
reg1<-lm(bwght~age)
View(bwght)
bwght<-bwght2
reg1<-lm(bwght~age)
View(bwght)
bwght<-bwght2
hist(mage)
hist(bwght$mage)
View(bwght)
meandep1<-mean(bwght$bwght)
meandep2<-mean(scale(bwght$bwght))
hist bwght$bwght
hist(bwght$bwght)
hist(bwght$bwght)
View(bwght)
